[{"/Users/josse/Projects/booking/src/index.js":"1","/Users/josse/Projects/booking/src/serviceWorker.js":"2","/Users/josse/Projects/booking/src/App.js":"3","/Users/josse/Projects/booking/src/components/footer.js":"4","/Users/josse/Projects/booking/src/components/header.js":"5","/Users/josse/Projects/booking/src/components/bookables.js":"6","/Users/josse/Projects/booking/src/components/i18n.js":"7","/Users/josse/Projects/booking/src/components/header-mobile.js":"8","/Users/josse/Projects/booking/src/components/menu.js":"9","/Users/josse/Projects/booking/src/components/food.js":"10","/Users/josse/Projects/booking/src/components/lodging.js":"11","/Users/josse/Projects/booking/src/components/tabs.js":"12","/Users/josse/Projects/booking/src/components/dateselector.js":"13","/Users/josse/Projects/booking/src/components/tab.js":"14","/Users/josse/Projects/booking/src/pages/checkout.js":"15","/Users/josse/Projects/booking/src/components/selected.js":"16","/Users/josse/Projects/booking/src/components/scrollToTop.js":"17","/Users/josse/Projects/booking/src/pages/confirmation.js":"18","/Users/josse/Projects/booking/src/components/rental.js":"19","/Users/josse/Projects/booking/src/components/camp.js":"20"},{"size":545,"mtime":1610089959218,"results":"21","hashOfConfig":"22"},{"size":5085,"mtime":1584349835710,"results":"23","hashOfConfig":"22"},{"size":5412,"mtime":1610481108015,"results":"24","hashOfConfig":"22"},{"size":3592,"mtime":1610525507289,"results":"25","hashOfConfig":"22"},{"size":1919,"mtime":1608541365724,"results":"26","hashOfConfig":"22"},{"size":6212,"mtime":1610481053158,"results":"27","hashOfConfig":"22"},{"size":1912,"mtime":1610088410826,"results":"28","hashOfConfig":"22"},{"size":5789,"mtime":1608544722472,"results":"29","hashOfConfig":"22"},{"size":1957,"mtime":1608653811231,"results":"30","hashOfConfig":"22"},{"size":3782,"mtime":1610523533398,"results":"31","hashOfConfig":"22"},{"size":2524,"mtime":1610225032767,"results":"32","hashOfConfig":"22"},{"size":1564,"mtime":1609917172570,"results":"33","hashOfConfig":"22"},{"size":1456,"mtime":1610303464420,"results":"34","hashOfConfig":"22"},{"size":867,"mtime":1609917167424,"results":"35","hashOfConfig":"22"},{"size":5369,"mtime":1610486274676,"results":"36","hashOfConfig":"22"},{"size":2766,"mtime":1610223638752,"results":"37","hashOfConfig":"22"},{"size":344,"mtime":1609258129151,"results":"38","hashOfConfig":"22"},{"size":3167,"mtime":1610561325128,"results":"39","hashOfConfig":"22"},{"size":3614,"mtime":1610523269451,"results":"40","hashOfConfig":"22"},{"size":2374,"mtime":1610224909845,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"1kmy3j2",{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"44"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"75","usedDeprecatedRules":"44"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"/Users/josse/Projects/booking/src/index.js",[],["86","87"],"/Users/josse/Projects/booking/src/serviceWorker.js",[],"/Users/josse/Projects/booking/src/App.js",["88"],"import React from 'react';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Link,\n    Route\n} from \"react-router-dom\";\nimport moment from 'moment';\nimport { DateTime } from 'luxon';\n\nimport ScrollToTop from './components/scrollToTop.js';\nimport Footer from './components/footer.js';\nimport Header from './components/header.js';\nimport Bookables from './components/bookables.js';\nimport Checkout from './pages/checkout.js';\nimport Confirmation from './pages/confirmation.js';\nimport Selected from './components/selected.js';\nimport i18n from './components/i18n';\n\nimport './sass/App.scss';\nimport './sass/general.scss';\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            lng: 'sv',\n            selected: [],\n            priceTotal: 0,\n            error: '',\n        }\n        this.onLanguageChanged = this.onLanguageChanged.bind(this);\n        this.handleBookableChange = this.handleBookableChange.bind(this);\n        this.handleBookableRemove = this.handleBookableRemove.bind(this);\n    }\n\n    componentDidMount() {\n        i18n.on('languageChanged', this.onLanguageChanged);\n        i18n.changeLanguage('sv');\n    }\n    componentWillUnmount() {\n        i18n.off('languageChanged', this.onLanguageChanged)\n    }\n    onLanguageChanged(lng) {\n        this.setState({\n            lng: lng\n        })\n    }\n\n    handleBookableRemove(id) {\n        let newState;\n        if(this.state.selected.orderLines) {\n            newState = this.state.selected.orderLines;\n            const index = newState.findIndex(n => n.productId === id);\n            newState.splice(index, 1);\n        }\n        this.setState({\n            selected: {\n                orderLines: newState\n            }\n        })\n    }\n    handleBookableChange(data) {\n        let newState = (this.state.selected.orderLines) ? this.state.selected.orderLines : [data];\n        newState = [...newState.filter(n => n.productId !== data.productId), data];\n\n        let formattedProduct = newState.map((selected, i) => {\n            const startDate = selected.startDate ? moment(selected.startDate).format(\"YYYY-MM-DD\") : '';\n            const endDate = selected.endDate ? moment(selected.endDate).format(\"YYYY-MM-DD\") : '';\n            return ({ \"id\": selected.productId, \"quantity\": selected.quantity, \"startDate\": startDate, \"endDate\": endDate })\n        });\n\n        this.updateOrder(formattedProduct);\n    }\n    updateOrder(products) {\n        let data = {\n            \"products\": products\n        };\n\n        data = JSON.stringify(data);\n        fetch('https://api.test.naturlogi.se/api/order/validate', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: data\n        })\n            .then((response) => {\n                return response.json();\n            })\n            .then((data) => {\n                if (data.id) {\n                    this.setState(prevState => {\n                        return { selected: data }\n                    });\n                } else {\n                    console.warn(data)\n                    this.setState(prevState => {\n                        return { error: data.title }\n                    });\n                }\n            });\n    }\n\n    render() {\n        return (\n            <Router className=\"App\">\n                <ScrollToTop />\n                <Header />\n                <div className=\"suki-wrapper suki-wrapper-text\">\n                    {/* <button className={`lng button mr-1 mt-1 ${(this.state.lng === 'sv') ? 'active' : ''}` } onClick={() => i18n.changeLanguage('sv')}>sv</button>\n          <button className={`lng button mt-1 ${this.state.lng === 'en' ? 'active' : ''}` } onClick={() => i18n.changeLanguage('en')}>en</button> */}\n\n                    <Switch>\n                        <Route path=\"/boka\">\n                            <h3>BOKA DIN VISTELSE</h3>\n                            <p className=\"mt-1\">{i18n.t('intro')}</p>\n                            <Bookables selectedItems={this.state.selected} onBookableChange={this.handleBookableChange} />\n                            <Selected selectedItems={this.state.selected} onBookableRemove={this.handleBookableRemove} onBookableChange={this.handleBookableChange}></Selected>\n                        </Route>\n                        {/* <Route path={\"/boka\" | \"/checkout\"}>\n                            <Selected selectedItems={this.state.selected} onBookableRemove={this.handleBookableRemove} onBookableChange={this.handleBookableChange}></Selected>\n                        </Route> */}\n                        <Route path=\"/checkout\">\n                            <Checkout selectedItems={this.state.selected} onBookableRemove={this.handleBookableRemove} onBookableChange={this.handleBookableChange} />\n                        </Route>\n                        <Route path=\"/confirmation\">\n                            <Confirmation />\n                        </Route>\n                    </Switch>\n\n                </div>\n\n                <Route path=\"/boka\">\n                    <Link id=\"tocheckout\" className=\"suki-wrapper suki-wrapper-text button\" to={{ pathname: \"/checkout\", state: this.state.selected }} >Gå till checkout</Link>\n                </Route>\n                <div className=\"warning\">{this.state.error}</div>\n                <Footer />\n            </Router>\n        );\n    }\n}\n\nexport default App;\n","/Users/josse/Projects/booking/src/components/footer.js",[],"/Users/josse/Projects/booking/src/components/header.js",[],"/Users/josse/Projects/booking/src/components/bookables.js",[],"/Users/josse/Projects/booking/src/components/i18n.js",[],"/Users/josse/Projects/booking/src/components/header-mobile.js",[],"/Users/josse/Projects/booking/src/components/menu.js",[],"/Users/josse/Projects/booking/src/components/food.js",[],"/Users/josse/Projects/booking/src/components/lodging.js",[],"/Users/josse/Projects/booking/src/components/tabs.js",[],"/Users/josse/Projects/booking/src/components/dateselector.js",[],"/Users/josse/Projects/booking/src/components/tab.js",[],["89","90"],"/Users/josse/Projects/booking/src/pages/checkout.js",["91"],"import React from 'react';\nimport {\n    BrowserRouter as Router, // eslint-disable-line\n    Link,\n    withRouter\n  } from 'react-router-dom';\nimport moment from 'moment';\nimport { DateTime } from 'luxon';\nimport parse from 'html-react-parser';\nimport Selected from '../components/selected.js';\n\nclass Checkout extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            selected: [],\n            discount: \"\",\n            discountMessage: \" \",\n            valid: \"notvalid\",\n        }\n        this.klarnaHtmlSnippet = React.createRef();\n        this.handleDiscountChange = this.handleDiscountChange.bind(this);\n        this.verifyDiscount = this.verifyDiscount.bind(this);\n    }\n    componentDidMount() {\n        if(this.props.location.state) {\n            this.fetchCheckout();\n        }\n    }\n    handleBookableChange(data) {\n        this.props.onBookableChange(data);\n    }\n    handleBookableRemove(data) {\n        this.props.onBookableRemove(data);\n    }\n    fetchCheckout() {\n        let data = {\n            \"products\": [...this.props.location.state.orderLines.map(selected => {\n                return ({\"id\": selected.productId, \"quantity\": selected.quantity, \"startDate\": selected.startDate, \"endDate\": selected.endDate } )\n            })]\n        };\n      \n        data = JSON.stringify(data);\n        fetch('https://api.test.naturlogi.se/api/order/checkout', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: data\n        })\n        .then((response) => {\n            return response.json();\n        })\n        .then((data) => {\n            this.klarnaHtmlSnippet.current.innerHTML = data.klarnaHtmlSnippet;\n            const scriptsTags = this.klarnaHtmlSnippet.current.getElementsByTagName('script');\n            for (let i = 0; i < scriptsTags.length; i++) {\n                const parentNode = scriptsTags[i].parentNode;\n                const newScriptTag = document.createElement('script');\n                newScriptTag.type = 'text/javascript';\n                newScriptTag.text = scriptsTags[i].text;\n                parentNode.removeChild(scriptsTags[i]);\n                parentNode.appendChild(newScriptTag);\n            }\n        });\n    }\n    renderKlarna(snippet) {\n        return (parse(snippet));\n    }\n    handleDiscountChange(event) {\n        this.setState({discount: event.target.value});\n      }\n/*     verifyDiscount(e) {\n        console.log(\"verify this: \" + this.state.discount)\n        if(this.state.discount === 'valid') {\n            this.setState({\n                discountMessage: \"Verifierad\",\n                valid: \"valid\",\n            });\n        } else {\n            this.setState({\n                discountMessage: \"Ej giltig\",\n                valid: \"notvalid\",\n            });\n        }\n    } */\n    verifyDiscount(e) {\n        console.log(\"verify this: \" + this.state.discount)\n        let data = {\n            \"products\": [...this.props.location.state.orderLines.map(selected => {\n                const startDate = selected.startDate ? moment(selected.startDate).format(\"YYYY-MM-DD\") : '';\n                const endDate = selected.endDate ? moment(selected.endDate).format(\"YYYY-MM-DD\") : '';\n                return ({\"id\": selected.productId, \"quantity\": selected.quantity, \"startDate\": startDate, \"endDate\": endDate } )\n            })],\n            \"couponCode\": this.state.discount\n        };\n\n        data = JSON.stringify(data);\n        fetch('https://api.test.naturlogi.se/api/order/validate', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: data\n        })\n            .then((response) => {\n                return response.json();\n            })\n            .then((data) => {\n                if (data.id) {\n                    console.log(data)\n                } else {\n                    console.warn(data)\n                    this.setState(prevState => {\n                        return { error: data.title }\n                    });\n                }\n            });\n    }\n    render() {\n        return (\n            <div className=\"checkout\">\n                <Link to=\"/boka\" className=\"button\" >Back</Link>\n                {/* <h2>Checkout</h2> */}\n                \n                <div className=\"extraInfo\">\n                    <label htmlFor=\"other\">Övrig info</label>\n                    <textarea name=\"other\" type=\"text\" placeholder=\"Ange eventuella matpreferenser eller andra önskemål när det gäller din bokning.\"/>\n\n                    <label htmlFor=\"discount\">Rabattkod/Presentkort</label>\n                    <input name=\"discount\" type=\"text\" value={this.state.discount} onChange={this.handleDiscountChange}/>\n                    <div>\n                        <span className={this.state.valid}>{this.state.discountMessage}</span>\n                        <button className=\"verifyDiscount button\" onClick={this.verifyDiscount} >Verifiera</button>\n                    </div>\n                </div>\n                <Selected selectedItems={this.props.selectedItems} onBookableRemove={this.handleBookableRemove} onBookableChange={this.handleBookableChange}></Selected>\n                <div id=\"klarnaHtmlSnippet\" ref={this.klarnaHtmlSnippet}>Klarna</div>\n            </div>\n        );\n    }\n}\n\nexport default withRouter(Checkout);\n","/Users/josse/Projects/booking/src/components/selected.js",[],"/Users/josse/Projects/booking/src/components/scrollToTop.js",[],"/Users/josse/Projects/booking/src/pages/confirmation.js",[],"/Users/josse/Projects/booking/src/components/rental.js",[],"/Users/josse/Projects/booking/src/components/camp.js",[],{"ruleId":"92","replacedBy":"93"},{"ruleId":"94","replacedBy":"95"},{"ruleId":"96","severity":1,"message":"97","line":9,"column":10,"nodeType":"98","messageId":"99","endLine":9,"endColumn":18},{"ruleId":"92","replacedBy":"100"},{"ruleId":"94","replacedBy":"101"},{"ruleId":"96","severity":1,"message":"97","line":8,"column":10,"nodeType":"98","messageId":"99","endLine":8,"endColumn":18},"no-native-reassign",["102"],"no-negated-in-lhs",["103"],"no-unused-vars","'DateTime' is defined but never used.","Identifier","unusedVar",["102"],["103"],"no-global-assign","no-unsafe-negation"]